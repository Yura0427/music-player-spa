(this["webpackJsonpmusic-player-spa"]=this["webpackJsonpmusic-player-spa"]||[]).push([[0],{116:function(e,t,n){},117:function(e,t,n){},126:function(e,t,n){"use strict";n.r(t);var c={};n.r(c),n.d(c,"playTrack",(function(){return de})),n.d(c,"pauseTrack",(function(){return be})),n.d(c,"setDuration",(function(){return he})),n.d(c,"setVolume",(function(){return Oe})),n.d(c,"setCurrentTime",(function(){return fe})),n.d(c,"setActiveTrack",(function(){return pe}));var a={};n.r(a),n.d(a,"setProgress",(function(){return me}));var r=n(0),i=n.n(r),o=n(13),s=n.n(o),l=(n(116),n(117),n(45)),u=n(18),j=n(67),d=n(26),b=n(10),h=n(5),O=n(167),f=n(24),p=n(197),x=n(169),m=n(171),v=n(172),g=n(175),y=n(73),k=n(174),w=n(173),_=n(91),C=n.n(_),T=n(92),S=n.n(T),E=n(93),P=n.n(E),A=n(176),N=n(177),I=n(178),R=n(94),D=n.n(R),L=n(95),M=n.n(L),F=n(96),B=n.n(F),U=n(3),z=240,H=Object(O.a)((function(e){return{root:{display:"flex"},appBar:{transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{width:"calc(100% - ".concat(z,"px)"),marginLeft:z,transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:e.spacing(2)},hide:{display:"none"},drawer:{width:z,flexShrink:0},drawerPaper:{width:z},drawerHeader:Object(b.a)(Object(b.a)({display:"flex",alignItems:"center",padding:e.spacing(0,1)},e.mixins.toolbar),{},{justifyContent:"flex-end"}),content:{flexGrow:1,padding:e.spacing(3),transition:e.transitions.create("margin",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),marginLeft:-240},contentShift:{transition:e.transitions.create("margin",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen}),marginLeft:0}}})),V=[{text:"Home",href:"/"},{text:"Track list",href:"/tracks"},{text:"Album list",href:"/albums"}];function K(){var e=Object(u.f)(),t=H(),n=Object(f.a)(),c=i.a.useState(!1),a=Object(d.a)(c,2),r=a[0],o=a[1];return Object(U.jsxs)("div",{className:t.root,children:[Object(U.jsx)(x.a,{}),Object(U.jsx)(m.a,{position:"fixed",className:Object(h.a)(t.appBar,Object(j.a)({},t.appBarShift,r)),children:Object(U.jsxs)(v.a,{children:[Object(U.jsx)(w.a,{color:"inherit","aria-label":"open drawer",onClick:function(){o(!0)},edge:"start",className:Object(h.a)(t.menuButton,r&&t.hide),children:Object(U.jsx)(C.a,{})}),Object(U.jsx)(y.a,{variant:"h6",noWrap:!0,children:"Music Player"})]})}),Object(U.jsxs)(p.a,{className:t.drawer,variant:"persistent",anchor:"left",open:r,classes:{paper:t.drawerPaper},children:[Object(U.jsx)("div",{className:t.drawerHeader,children:Object(U.jsx)(w.a,{onClick:function(){o(!1)},children:"ltr"===n.direction?Object(U.jsx)(S.a,{}):Object(U.jsx)(P.a,{})})}),Object(U.jsx)(k.a,{}),Object(U.jsx)(g.a,{children:V.map((function(t,n){var c=t.text,a=t.href;return Object(U.jsxs)(A.a,{as:l.b,button:!0,onClick:function(){o(!1),e.push(a)},children:[Object(U.jsx)(N.a,{children:0===n?Object(U.jsx)(D.a,{}):1===n?Object(U.jsx)(M.a,{}):Object(U.jsx)(B.a,{})}),Object(U.jsx)(I.a,{primary:c})]},a)}))})]})]})}var G=n(179),Y=function(){return Object(U.jsx)(G.a,{container:!0,justifyContent:"center",children:"Music Player Demo"})},W=n(33),q=n.n(W),J=n(53),X=n(180),Q=n(194),Z=n(184),$=n(22),ee=n(97),te=n.n(ee),ne=n(181),ce=n(182),ae=n(183),re=n(49),ie="PLAY",oe="PAUSE",se="SET_ACTIVE",le="SET_DURATION",ue="SET_CURRENT_TIME",je="SET_VOLUME",de=function(){return{type:ie}},be=function(){return{type:oe}},he=function(e){return{type:le,payload:e}},Oe=function(e){return{type:je,payload:e}},fe=function(e){return{type:ue,payload:e}},pe=function(e){return{type:se,payload:e}},xe="SET_PROGRESS",me=function(e){return{type:xe,payload:e}},ve=Object(b.a)(Object(b.a)({},c),a),ge=function(){var e=Object($.b)();return Object(re.b)(ve,e)},ye=function(e){var t=e.track,n=Object(u.f)(),c=ge().setActiveTrack,a=Object($.c)((function(e){return e.player})),r=a.active,i=a.pause,o=a.duration,s=a.currentTime,l=function(e){return"".concat(("0"+Math.floor(e/60%60)).slice(-2),":").concat(("0"+Math.floor(e%60)).slice(-2))},j=function(e){e.stopPropagation(),c(t)},d=(null===r||void 0===r?void 0:r._id)!==t._id?{}:{backgroundColor:"lightgrey"};return Object(U.jsxs)(X.a,{style:d,className:te.a.track,onClick:function(){n.push("/tracks/"+t._id)},children:[Object(U.jsx)(w.a,{children:(null===r||void 0===r?void 0:r._id)!==t._id||i?Object(U.jsx)(ne.a,{onClick:j}):Object(U.jsx)(ce.a,{onClick:function(e){e.stopPropagation()}})}),Object(U.jsx)("img",{width:70,height:70,src:t.picture,alt:"cover"}),Object(U.jsxs)(G.a,{container:!0,direction:"column",style:{width:200,margin:"0 20px"},children:[Object(U.jsx)("div",{children:t.name}),Object(U.jsx)("div",{style:{fontSize:12,color:"gray"},children:t.artist})]}),(null===r||void 0===r?void 0:r._id)===t._id&&Object(U.jsxs)("div",{children:[l(s)," / ",l(o)]}),Object(U.jsx)(w.a,{style:{marginLeft:"auto"},onClick:function(e){return e.stopPropagation()},children:Object(U.jsx)(ae.a,{})})]})},ke=function(e){var t=e.tracks;return Object(U.jsx)(G.a,{container:!0,direction:"column",children:Object(U.jsx)(Q.a,{p:2,children:t.map((function(e){return Object(U.jsx)(ye,{track:e},e._id)}))})})},we=n(62);n(129),n(128);we.a.apps.length||(we.a.initializeApp({apiKey:"AIzaSyBbyLvtwFzxlsGNGlpqA-bPg44AvnITbyo",authDomain:"music-player-85867.firebaseapp.com",projectId:"music-player-85867",storageBucket:"music-player-85867.appspot.com",messagingSenderId:"205556845355",appId:"1:205556845355:web:6c4b57f4b54ed4b2bb136e"}),console.log("Firebase was successfully init."));var _e=we.a.firestore(),Ce=we.a.storage(),Te=(we.a,"FETCH_TRACKS"),Se="FETCH_TRACKS_ERROR",Ee=function(){return function(){var e=Object(J.a)(q.a.mark((function e(t){var n;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=[],e.next=4,_e.collection("trackListDemo").get().then((function(e){e.forEach((function(e){n.push(Object(b.a)(Object(b.a)({},e.data()),{},{_id:e.id}))}))}));case 4:t({type:Te,payload:n}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),t({type:Se,payload:"FETCH TRACKS ERROR "});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},Pe=function(){var e=Object(u.f)(),t=i.a.useState(!0),n=Object(d.a)(t,2),c=n[0],a=n[1],r=Object($.b)(),o=Object($.c)((function(e){return e.track})),s=o.tracks,l=o.error,j={};return Object($.c)((function(e){return e.player})).active&&(j={height:"82vh",overflow:"auto"}),i.a.useEffect((function(){function e(){return(e=Object(J.a)(q.a.mark((function e(){return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=r,e.next=3,Ee();case 3:e.t1=e.sent,(0,e.t0)(e.t1).then((function(){a(!1)}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[r]),c?Object(U.jsx)("div",{children:"loading..."}):Object(U.jsx)(G.a,{container:!0,justifyContent:"center",style:j,children:Object(U.jsxs)(X.a,{style:{width:"90%"},children:[Object(U.jsx)(Q.a,{p:3,children:Object(U.jsxs)(G.a,{container:!0,justifyContent:"space-between",children:[Object(U.jsx)("h1",{children:"Track list"}),Object(U.jsx)(Z.a,{onClick:function(){return e.push("/create")},children:"Download"})]})}),l?Object(U.jsx)("h1",{children:l}):Object(U.jsx)(ke,{tracks:s})]})})},Ae=n(193),Ne=n(196),Ie=function(e){var t=e.setFile,n=e.accept,c=e.children,a=ge().setProgress,r=i.a.useRef();return Object(U.jsxs)("div",{onClick:function(){return r.current.click()},children:[Object(U.jsx)("input",{type:"file",accept:n,style:{display:"none"},ref:r,onChange:function(e){var c=e.target.files[0],r="".concat(Object(Ne.a)(),".").concat(c.type.split("/")[1]),i=Ce.ref().child("".concat(n.split("/")[0],"/")+r).put(c);i.on("state_changed",(function(e){var t=e.bytesTransferred/e.totalBytes*100;console.log(Math.ceil(t)),a(Math.ceil(t))}),(function(e){console.error("Upload error ",e)}),(function(){i.snapshot.ref.getDownloadURL().then((function(e){console.log(e),t(e)}))}))}}),c]})},Re=n(185),De=n(199),Le=n(186),Me=n(198),Fe=["Track information","Download the cover","Download track"],Be=function(e){var t=e.activeStep,n=e.children;return Object(U.jsxs)(Re.a,{children:[Object(U.jsx)(De.a,{activeStep:t,children:Fe.map((function(e,n){return Object(U.jsx)(Le.a,{completed:t>n,children:Object(U.jsx)(Me.a,{children:e})},n)}))}),Object(U.jsx)(G.a,{container:!0,justifyContent:"center",style:{margin:"70px 0",height:300},children:Object(U.jsx)(X.a,{style:{width:700},children:n})})]})},Ue=function(e){var t=Object(r.useState)(e),n=Object(d.a)(t,2),c=n[0],a=n[1];return{value:c,onChange:function(e){a(e.target.value)}}},ze=n(187),He=Object(O.a)({root:{width:"100%"}});function Ve(){var e=He(),t=Object($.c)((function(e){return e.fileUpload})).progress;return Object(U.jsx)("div",{className:e.root,children:Object(U.jsx)(ze.a,{variant:"determinate",value:t})})}var Ke,Ge=function(){var e=Object(r.useState)(0),t=Object(d.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(null),i=Object(d.a)(a,2),o=i[0],s=i[1],l=Object(r.useState)(null),j=Object(d.a)(l,2),h=j[0],O=j[1],f=Ue(""),p=Ue(""),x=Ue(""),m=Object(u.f)();Object($.c)((function(e){return e.fileUpload})).progress;return Object(U.jsxs)(U.Fragment,{children:[Object(U.jsxs)(Be,{activeStep:n,children:[0===n&&Object(U.jsxs)(G.a,{container:!0,direction:"column",style:{padding:20},children:[Object(U.jsx)(Ae.a,Object(b.a)(Object(b.a)({},f),{},{style:{marginTop:10},label:"Track name"})),Object(U.jsx)(Ae.a,Object(b.a)(Object(b.a)({},p),{},{style:{marginTop:10},label:"Author's name"})),Object(U.jsx)(Ae.a,Object(b.a)(Object(b.a)({},x),{},{style:{marginTop:10},label:"Track text",multiline:!0,rows:5}))]}),1===n&&Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(Ie,{setFile:s,accept:"image/*",children:Object(U.jsx)(Z.a,{style:{width:"100%",height:300},children:"Download cover"})}),Object(U.jsx)(Ve,{})]}),2===n&&Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(Ie,{setFile:O,accept:"audio/*",children:Object(U.jsx)(Z.a,{style:{width:"100%",height:300},children:"Loading track"})}),Object(U.jsx)(Ve,{})]})]}),Object(U.jsxs)(G.a,{container:!0,justifyContent:"space-between",children:[Object(U.jsx)(Z.a,{disabled:0===n,onClick:function(){c((function(e){return e-1}))},children:"Back"}),Object(U.jsx)(Z.a,{onClick:function(){if(2!==n)c((function(e){return e+1}));else{var e={name:f.value,artist:p.value,text:x.value,picture:o,audio:h,comments:[]};console.log(e),_e.collection("trackListDemo").add(e).then((function(e){console.log("Document written with ID: ",e.id),m.push("/tracks")})).catch((function(e){console.error("Error adding document: ",e)}))}},children:"Next"})]})]})},Ye=n(188),We=n(189),qe=n(190),Je=n(191),Xe=n(192),Qe=n(72),Ze=n.n(Qe),$e=n(200),et=function(e){var t=e.left,n=e.right,c=e.onChange,a=e.width,r=function(e){return"".concat(("0"+Math.floor(e/60%60)).slice(-2),":").concat(("0"+Math.floor(e%60)).slice(-2))};return Object(U.jsx)("div",{style:{width:a},children:Object(U.jsxs)(G.a,{container:!0,spacing:2,alignItems:"center",children:[Object(U.jsx)(G.a,{item:!0,children:r(t)}),Object(U.jsx)(G.a,{item:!0,xs:!0,children:Object(U.jsx)($e.a,{min:0,max:n,value:t,onChange:c})}),Object(U.jsx)(G.a,{item:!0,children:r(n)})]})})},tt=function(e){var t=e.left,n=e.right,c=e.onChange;e.width;return Object(U.jsx)("div",{style:{position:"absolute",right:10,bottom:40,height:100},children:Object(U.jsx)($e.a,{orientation:"vertical",min:0,max:n,value:t,onChange:c})})},nt=function(){var e=Object($.c)((function(e){return e.track})).tracks,t=Object($.c)((function(e){return e.player})),n=t.pause,c=t.volume,a=t.active,r=t.duration,o=t.currentTime,s=ge(),l=s.pauseTrack,u=s.playTrack,j=s.setVolume,d=s.setCurrentTime,b=s.setDuration,h=s.setActiveTrack;i.a.useEffect((function(){console.log("audio",Ke),console.log("active",a),Ke?O():Ke=new Audio}),[a]);var O=function(){a&&(Ke.src=a.audio,Ke.volume=c/100,Ke.onloadedmetadata=function(){b(Math.ceil(Ke.duration))},Ke.ontimeupdate=function(){d(Math.ceil(Ke.currentTime))},Ke.onended=function(t){var n=e.findIndex((function(e){return e._id===a._id}))+1;n===e.length&&(n=0),h(e[n])},f())},f=function(){u(),Ke.play()};return a?Object(U.jsxs)("div",{className:Ze.a.player,children:[Object(U.jsx)(w.a,{children:Object(U.jsx)(Ye.a,{onClick:function(){var t=e.findIndex((function(e){return e._id===a._id}))-1;t<0&&(t=e.length-1),h(e[t])}})}),Object(U.jsx)(w.a,{children:n?Object(U.jsx)(ne.a,{onClick:f}):Object(U.jsx)(ce.a,{onClick:function(){l(),Ke.pause()}})}),Object(U.jsx)(w.a,{children:Object(U.jsx)(We.a,{onClick:function(){var t=e.findIndex((function(e){return e._id===a._id}))+1;t===e.length&&(t=0),h(e[t])}})}),Object(U.jsxs)(G.a,{container:!0,direction:"column",style:{width:200,margin:"0 20px"},children:[Object(U.jsx)("div",{children:null===a||void 0===a?void 0:a.name}),Object(U.jsx)("div",{style:{fontSize:12,color:"gray"},children:null===a||void 0===a?void 0:a.artist})]}),Object(U.jsx)(et,{width:"100%",left:o,right:r,onChange:function(e,t){Ke.currentTime=Number(t),d(Number(t))}}),Object(U.jsxs)("div",{className:Ze.a.volume,children:[Object(U.jsx)(w.a,{color:"default",onClick:function(){Ke.volume=0,j(0)},children:c>49?Object(U.jsx)(qe.a,{}):0===c?Object(U.jsx)(Je.a,{}):Object(U.jsx)(Xe.a,{})}),Object(U.jsx)("div",{className:Ze.a.volProgress,children:Object(U.jsx)(tt,{left:c,right:100,onChange:function(e,t){Ke.volume=Number(t)/100,j(Number(t))}})})]})]}):null},ct=function(e){var t,n=e.match.params,c=i.a.useState({}),a=Object(d.a)(c,2),r=a[0],o=a[1];i.a.useEffect((function(){function e(){return(e=Object(J.a)(q.a.mark((function e(){return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(n._id),_e.collection("trackListDemo").doc("".concat(n._id)).get().then((function(e){if(e.exists){var t=Object(b.a)(Object(b.a)({},e.data()),{},{_id:e.id});_e.collection("comments").where("_id","==",n._id).onSnapshot((function(e){var n=[];e.forEach((function(e){n.push(e.data())})),t=Object(b.a)(Object(b.a)({},t),{},{comments:n}),o(t)}))}}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[n._id]);var s=Object(u.f)(),l=i.a.useState(""),j=Object(d.a)(l,2),h=j[0],O=j[1],f=i.a.useState(""),p=Object(d.a)(f,2),x=p[0],m=p[1],v=function(){var e=Object(J.a)(q.a.mark((function e(){return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_e.collection("comments").add({username:h,text:x,_id:r._id});case 2:O(""),m("");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return i.a.useEffect((function(){}),[]),Object(U.jsxs)(Q.a,{m:2,children:[Object(U.jsx)(Z.a,{style:{fontSize:32},variant:"outlined",onClick:function(){return s.push("/tracks")},children:"Back"}),Object(U.jsxs)(G.a,{container:!0,style:{margin:"20px 0"},children:[Object(U.jsx)("img",{src:r.picture,width:200,height:200,alt:"cover"}),Object(U.jsxs)("div",{style:{marginLeft:30},children:[Object(U.jsxs)("h1",{children:["Track name - ",r.name]}),Object(U.jsxs)("h1",{children:["Artist - ",r.artist]}),Object(U.jsxs)("h1",{children:["Listens - ",r.listens]})]})]}),Object(U.jsx)("h1",{children:"Track text"}),Object(U.jsx)("p",{children:r.text}),Object(U.jsx)("h1",{children:"Coments"}),Object(U.jsxs)(G.a,{container:!0,children:[Object(U.jsx)(Ae.a,{value:h,onChange:function(e){return O(e.target.value)},label:"Your name",fullWidth:!0}),Object(U.jsx)(Ae.a,{value:x,onChange:function(e){return m(e.target.value)},label:"Comment",fullWidth:!0,multiline:!0,rows:4}),Object(U.jsx)(Z.a,{onClick:v,children:"Send"})]}),Object(U.jsx)("div",{children:null===(t=r.comments)||void 0===t?void 0:t.map((function(e,t){return Object(U.jsxs)("div",{children:[Object(U.jsxs)("div",{children:["Name - ",e.username]}),Object(U.jsxs)("div",{children:["Comment - ",e.text]})]},t)}))})]})};var at=function(){return Object(U.jsx)(l.a,{children:Object(U.jsxs)("div",{style:{marginTop:70},children:[Object(U.jsx)(K,{}),Object(U.jsxs)(u.c,{children:[Object(U.jsx)(u.a,{exact:!0,path:"/",component:Y}),Object(U.jsx)(u.a,{exact:!0,path:"/tracks",component:Pe}),Object(U.jsx)(u.a,{exact:!0,path:"/tracks/:_id",component:ct}),Object(U.jsx)(u.a,{exact:!0,path:"/create",component:Ge})]}),Object(U.jsx)(nt,{})]})})},rt={currentTime:0,duration:0,volume:50,active:null,pause:!0},it={tracks:[],error:""},ot={progress:null,done:!1},st=Object(re.c)({player:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case oe:return console.log("PAUSE"),Object(b.a)(Object(b.a)({},e),{},{pause:!0});case ie:return console.log("PLAY"),Object(b.a)(Object(b.a)({},e),{},{pause:!1});case ue:return Object(b.a)(Object(b.a)({},e),{},{currentTime:t.payload});case je:return Object(b.a)(Object(b.a)({},e),{},{volume:t.payload});case le:return Object(b.a)(Object(b.a)({},e),{},{duration:t.payload});case se:return console.log("SET_ACTIVE"),Object(b.a)(Object(b.a)({},e),{},{active:t.payload,duration:0,currentTime:0});default:return e}},track:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:it,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Te:return{error:"",tracks:t.payload};case Se:return Object(b.a)(Object(b.a)({},e),{},{error:t.payload});default:return e}},fileUpload:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ot,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case xe:return Object(b.a)(Object(b.a)({},e),{},{progress:t.payload});default:return e}}}),lt=n(98),ut=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||re.d,jt=Object(re.e)(st,ut(Object(re.a)(lt.a)));s.a.render(Object(U.jsx)(i.a.StrictMode,{children:Object(U.jsx)($.a,{store:jt,children:Object(U.jsx)(at,{})})}),document.getElementById("root"))},72:function(e,t,n){e.exports={player:"Player_player__3IEeK",volume:"Player_volume__2uq5r",volProgress:"Player_volProgress__2c0dR"}},97:function(e,t,n){e.exports={track:"TrackItem_track__2bYo2",active:"TrackItem_active__1FFCS"}}},[[126,1,2]]]);
//# sourceMappingURL=main.3a4c6397.chunk.js.map